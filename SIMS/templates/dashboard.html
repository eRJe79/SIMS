{% extends 'base/base.html' %}

{% block content %}
 <h1>Dashboard</h1>


<table class="table table-light table-striped">
    <div class="card-header">
    <strong>Calibrations to come</strong>
  	</div>
    <thead>
    <tr>
    <td><p>Day to calibration</p></td>
    <td><p>Calibration Date</p></td>
    <td><p>Piece Part Number</p></td>
    <td><p>Piece Serial Number</p></td>
    <td><p>Model</p></td>
    <td><p>Location</p></td>
    </tr>
    </thead>

    {% for instance in mypieces %}
    <tr class="datarow">
        {% if instance.calibration_recurrence %}
        {% if instance.is_calibration_due %}
            <td>{{ instance.calibration_days }} days</td>
            <td>{{ instance.date_calibration}}</td>
            <td>{{ instance.part_number }}</td>
            <td>{{ instance.manufacturer_serialnumber }}</td>
            <td>{{ instance.piece_model}}</td>
            {% if instance.fifth_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}-{{instance.fourth_location|default_if_none:""}}-{{instance.fifth_location|default_if_none:""}}</td>
			{% elif instance.fourth_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}-{{instance.fourth_location|default_if_none:""}}</td>
			{% elif instance.third_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}</td>
			{% else %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}</td>
            {% endif %}
        {% endif %}
        {% endif %}
    </tr>
    {% endfor %}
</table>
<table class="table table-light table-striped">
    <div class="card-header">
    <strong>Pieces in reparation</strong>
  	</div>
    <thead>
    <tr>
    <td><p>Part Number</p></td>
    <td><p>Serial Number</p></td>
    <td><p>Model</p></td>
    <td><p>Location</p></td>
    </tr>
    </thead>

    {% for instance in mypieces %}
    <tr class="datarow">
        {% if instance.is_in_reparation %}
            <td>{{ instance.part_number }}</td>
            <td>{{ instance.manufacturer_serialnumber }}</td>
            <td>{{ instance.piece_model}}</td>
            {% if instance.fifth_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}-{{instance.fourth_location|default_if_none:""}}-{{instance.fifth_location|default_if_none:""}}</td>
			{% elif instance.fourth_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}-{{instance.fourth_location|default_if_none:""}}</td>
			{% elif instance.third_location %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}-{{instance.third_location|default_if_none:""}}</td>
			{% else %}
				<td>{{instance.location}}-{{instance.second_location|default_if_none:""}}</td>
            {% endif %}
        {% endif %}
    </tr>
    {% endfor %}
</table>


{% endblock content %}