{% extends 'base/base.html' %}

{% block content %}
<div class="card">
  <div class="card-header">
    Piece Detail
  </div>
  <div class="card-body">
    <h5 class="card-title"> Manufacturer part number : {{ piece.part_number }}</h5>
    <p class="card-text">
    	<ul>
  <p><strong>Piece Model:</strong> {{ piece.piece_model }}</p>
  <p><strong>Description:</strong> {{ piece.description }}</p>
  <p><strong>Documentation:</strong> {{ piece.documentation }}</p>
  <p><strong>Type:</strong> {{ piece.item_type }}</p>
  <p><strong>Characteristic:</strong> {{ piece.item_characteristic }}</p>
  <p><strong>Manufacturer:</strong> {{ piece.manufacturer }}</p>
  <p><strong>Manufacturer Serial Number:</strong> {{ piece.manufacturer_serialnumber }}</p>
  <a href="{{ piece.website }}">{{ piece.website }}</a>

	</ul>
    </p>
  </div>
</div>

<!--  <li><a href="{% url 'piece-instance-detail' %}">Instances detail</a></li>-->
<div class="card-2">
  <div class="card-header">
    Available Instances
  </div>
    {% if piece_instance %}
    <table class="table table-light table-striped">
	    <thead>
		<tr>
		<td><p>In Use</p></td>
		<td><p>In Stock</p></td>
		<td><p>Refurbishing</p></td>
		<td><p>Reparation</p></td>
		</tr>
		</thead>
      <tr class="datarow">
				<td>{{ instance_in_use }}</td>
                <td>{{ instance_in_stock }}</td>
				<td>{{ instance_in_refurbished }}</td>
                <td>{{ instance_in_reparation }}</td>
        </tr>
	</table>

    <table class="table table-light table-striped">
	    <thead>
		<tr>
		<td><p>CAE Serial Number</p></td>
		<td><p>Location</p></td>
		<td><p>Status</p></td>
        </tr>
		</thead>
      {% for copy in piece_instance %}
      {% if copy.piece.manufacturer_serialnumber == piece.manufacturer_serialnumber %}
      <tr class="datarow">
		<td>{{ copy.serial_number }}</td>
        <td>{{ copy.location }}-{{ copy.second_location|default_if_none:"" }}-{{ copy.third_location|default_if_none:"" }}-{{ copy.fourth_location|default_if_none:"" }}-{{ copy.fifth_location|default_if_none:"" }}</td>
        <td>{{ copy.status }}</td>
        <td><a href="{% url 'update-piece-instance' copy.id %}" class="btn btn-outline-secondary btn-sm">Update</a>
          <a href="{% url 'delete-piece-instance' copy.id %}" class="btn btn-outline-danger btn-sm">Delete</a></td>
      </tr>
	{% endif %}
	{% endfor %}
	</table>
    {% endif %}
</div>
{% endblock %}